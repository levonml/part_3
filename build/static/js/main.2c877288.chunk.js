(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),u=n(17),a=n.n(u),o=n(8),i=n(3),s=function(e){var t=e.newFilter,n=e.handleFilterChange;return Object(r.jsxs)("div",{children:["Search: ",Object(r.jsx)("input",{value:t,onChange:n})]})},l=function(e){var t=e.addNote,n=e.newName,c=e.newNumber,u=e.handleNameChange,a=e.handleNumberChange;return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:n,onChange:u})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:c,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})})},d=function(e){var t=e.person,n=e.deleteContact;return Object(r.jsx)("div",{children:Object(r.jsx)("form",{onSubmit:n,id:t.id,children:Object(r.jsxs)("li",{children:[" ",t.name," ",t.number," ",Object(r.jsx)("button",{type:"submit",children:"delete"})]})})})},j=function(e){var t=e.persons,n=e.deleteContact;return Object(r.jsx)("div",{children:Object(r.jsx)("ul",{children:t.map((function(e){return Object(r.jsx)(d,{person:e,deleteContact:n},e.id)}))})})},b=n(4),f=n.n(b),h=n(7),m=n(5),p=n.n(m),v="/api/persons",O={getAll:function(){var e=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.a.get(v),e.prev=1,e.next=4,t;case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.a.post(v,t),e.prev=1,e.next=4,n;case 4:return r=e.sent,e.abrupt("return",r.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),remove:function(e){return p.a.delete("".concat(v,"/").concat(e)).then((function(e){return e.data})).catch((function(e){return e.message}))},update:function(e,t){return p.a.put("".concat(v,"/").concat(e),t).then((function(e){return e.data})).catch((function(e){return e.message}))}},g=function(e){var t=e.message;return null===t?null:Object(r.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},x=function(e){var t=e.message;return null===t?null:Object(r.jsx)("div",{style:{color:"red",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},w=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],a=Object(c.useState)(""),d=Object(i.a)(a,2),b=d[0],f=d[1],h=Object(c.useState)(""),m=Object(i.a)(h,2),p=m[0],v=m[1],w=Object(c.useState)(""),y=Object(i.a)(w,2),C=y[0],S=y[1],k=Object(c.useState)(null),N=Object(i.a)(k,2),T=N[0],E=N[1],F=Object(c.useState)(null),A=Object(i.a)(F,2),B=A[0],R=A[1];Object(c.useEffect)((function(){O.getAll().then((function(e){u(e)}))}),[]);var z,D=RegExp(C,"i");z=C?n.filter((function(e){return D.test(e.name)})):n;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(x,{message:B}),Object(r.jsx)(g,{message:T}),Object(r.jsx)(s,{newFilter:C,handleFilterChange:function(e){S(e.target.value)}}),Object(r.jsx)("h3",{children:"add a new"}),Object(r.jsx)(l,{addNote:function(e){e.preventDefault();var t={name:b,number:p},r=n.every((function(e){return e.number!==p})),c=n.every((function(e){return e.name!==b}));if(b&&p)if(c)O.create(t).then((function(e){e.error?(R("Errorjjjjjjjjjjjj ".concat(e.error)),setTimeout((function(){return R(null)}),4e3)):(u(n.concat(e)),E("Added ".concat(b)),setTimeout((function(){return E(null)}),4e3))})).catch((function(e){R("Error ".concat(e)),setTimeout((function(){return R(null)}),3e3)}));else if(r&&!c){if(window.confirm(" ".concat(b," is already added to phonebook, replace the old number with the new one?"))){var a=n.find((function(e){return e.name===b})),i=Object(o.a)(Object(o.a)({},a),{},{number:t.number});O.update(a.id,i).then((function(e){u(n.map((function(t){return t.id===a.id?e:t}))),E(" ".concat(b,"'s number has changed")),setTimeout((function(){return E(null)}),3e3)})).catch((function(e){R("".concat(b," has been deleted from the server")),setTimeout((function(){return R(null)}),3e3),u(n.filter((function(e){return e.id!==a.id})))}))}}else E(" ".concat(b," is already added to phonebook")),setTimeout((function(){return E(null)}),3e3);else R("Missin informaton"),setTimeout((function(){return R(null)}),3e3);f(""),v("")},newName:b,newNumber:p,handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){v(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(j,{persons:z,deleteContact:function(e){e.preventDefault();var t=e.target.id;if(t){var r=n.find((function(e){return e.id===t})).name;if(window.confirm("delete ".concat(r,"?"))){O.remove(t).catch((function(e){R("".concat(r," has been deleted from the server")),setTimeout((function(){return R(null)}),3e3)}));var c=n.filter((function(e){return e.id!==t}));u(c),E("".concat(r," is deleted succesfully")),setTimeout((function(){return E(null)}),3e3)}}}})]})};a.a.render(Object(r.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2c877288.chunk.js.map